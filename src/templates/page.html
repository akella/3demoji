---
title: Index page
---
{% extends "layouts/_layout.html" %}

{% block content %}
<div id="container"></div>
	
	<script id="vertShader" type="shader">
	varying vec2 vUv;
	varying vec3 vecPos;
	varying vec3 v_position;
	uniform float time;
	uniform float blend;
	uniform sampler2D original;
	uniform sampler2D target;



	void main() {
	  vUv = uv;
	  v_position = position.xyz;
	  float roundblend = sin(3.1415926*blend);
	  float stepblend = clamp( 2.*(v_position.x + v_position.y) +3.*blend - 1., 0.,1.);

	  float originalR = texture2D(original,vUv).r;
	  float targetR = texture2D(target,vUv).r;

	  v_position.z = 0.2* mix(originalR,targetR,stepblend) + roundblend*0.1*sin(v_position.x*10. + time/100.);
	  

	  v_position.x = position.x + roundblend*0.1*sin(v_position.y +v_position.x + blend);
	  v_position.y = position.y + roundblend*0.1*sin(v_position.y +v_position.x + blend);

	  vecPos = (modelViewMatrix * vec4(v_position, 1.0)).xyz;
	  gl_Position = projectionMatrix * vec4(vecPos, 1.0);
	}
	</script>
	<script id="fragShader" type="shader">
	varying vec3 v_position;
	varying vec2 vUv;
	uniform sampler2D original;
	uniform sampler2D target;
	uniform float blend;

	void main(void) {
	  
		vec2 st = v_position.xy;

		float koef = clamp(v_position.z/60.,0.,1.);

		vec3 color1 = vec3(1.,1.,1.);
		vec3 color2 = vec3(1.,0.,0.);

		vec3 color3 = mix(color1,color2,koef);

		vec2 grid = abs(fract(500.*st/4. - 0.5) - 0.5) / fwidth(500.*st/4.);
	  	float color = min(grid.x, grid.y);

	  	gl_FragColor = vec4(color3,1. - color);
	  	gl_FragColor = vec4(1.,0.,0.,1.);



	  	float stepblend = clamp(v_position.x + v_position.y +3.*blend - 1., 0.,1.);
	  	vec4 originalC = texture2D(original,vUv);
	  	vec4 targetC = texture2D(target,vUv);
	  	vec4 result = originalC*(1. - stepblend) + targetC*stepblend;
	  	gl_FragColor = result*(1. - color);
	}
	</script>

{% endblock %}
